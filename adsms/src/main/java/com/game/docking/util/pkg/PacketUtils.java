package com.game.docking.util.pkg;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URISyntaxException;
import java.net.URL;

import javax.servlet.http.HttpServletResponse;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.game.docking.util.Des;

public class PacketUtils {
    private static final Logger LOGGER = LoggerFactory.getLogger(PacketUtils.class);

    public static byte[] entityToBytes(InputStream in, int length) {
        ByteArrayPool mPool = new ByteArrayPool(4096);
        PoolingByteArrayOutputStream bytes = new PoolingByteArrayOutputStream(mPool, length);
        byte[] buffer = null;
        try {
            if (in == null) {
                LOGGER.info("InputStream is null");
                return buffer;
            }
            buffer = mPool.getBuf(1024);
            int count = 0;
            while ((count = in.read(buffer)) != -1) {
                bytes.write(buffer, 0, count);
            }
            return bytes.toByteArray();
        } catch (IOException e) {
            LOGGER.info("流转换异常：{}", e);
        } finally {
            mPool.returnBuf(buffer);
            try {
                in.close();
            } catch (IOException e1) {
                LOGGER.info("关闭流异常：{}", e1);
            }
            try {
                bytes.close();
            } catch (IOException e) {
                LOGGER.info("关闭字节数组：{}", e);
            }
        }
        return buffer;
    }

    /**
     * 发数据
     */
    public static void sendMessage(HttpServletResponse response, String context, boolean isgzip) {
        Packet pkt = PacketFactory.createEmpty(PacketFactory.PROTOCAL_VERSION, PacketFactory.CRYPT_TYPE_1, (short) 0);
        byte[] body = null;
        try {
            pkt.pack(context.getBytes());
            body = pkt.getPackedDada();
            response.setHeader("ISGZIP", String.valueOf(isgzip));
        } catch (Exception e) {
            LOGGER.info("封装数据包异常：{}", e);
        }
        OutputStream os = null;
        try {
            os = response.getOutputStream();
            if (isgzip) {
                os.write(PacketFactory.gZip(body));
            } else {
                os.write(body);
            }
        } catch (IOException e) {
            LOGGER.info("发送数据包异常：{}", e);
        } finally {
            try {
                if (os != null)
                    os.close();
            } catch (IOException e) {
                LOGGER.info("关闭流异常:{}", e);
            }
        }
    }

    /**
     * 发送数据
     */
    public static void send() throws URISyntaxException {
//        String u = "http://192.168.5.75:8080/adsms/testc.action";
//          String u = "http://192.168.5.75:8080/adsms/decData.action";
//        String u = "http://192.168.5.75:10010/adsms/getConfig.action";
//        String u = "http://192.168.5.75:10010/adsms/initArea.action";
//        String u = "http://192.168.5.119:12090/getConfig.action";
//        String u = "http://192.168.5.119:12090/initArea.action";
//        String u = "http://183.63.53.103:13110/getConfig.action";
//        String u = "http://www.itenfee.com:13110/initArea.action";
//        String u = "http://192.168.5.119:12090/initArea.action";
//        OutputStream os = null;
//        HttpURLConnection conn = null;
//        try {
//            URL url = new URL(u);
//            conn = (HttpURLConnection) url.openConnection();
//            conn.setDoOutput(true);
//            conn.setDoInput(true);
//            Packet p = PacketFactory.createEmpty(PacketFactory.PROTOCAL_VERSION, PacketFactory.CRYPT_TYPE_1, (short) 0);
//            // String str =
            // "{\"ets\":{\"sp\":[{\"pn\":\"com.htcmarket\",\"s\":3739487,\"vn\":\"0.1.0.0\"},{\"pn\":\"com.htc.framework\",\"s\":3499381,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.sense.ime.langpack.xeng_uk\",\"s\":2220390,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.CustomizationSetup\",\"s\":162255,\"vn\":\"6.1.855094\"},{\"pn\":\"com.htc\",\"s\":4142060,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.powersavinglauncher\",\"s\":3026472,\"vn\":\"1.3.849195\"},{\"pn\":\"com.tencent.qqpimsecureforhtc\",\"s\":7012047,\"vn\":\"氓鈥犫€γ铰р€八?.8\"},{\"pn\":\"com.android.packageinstaller\",\"s\":697725,\"vn\":\"5.0.856241\"},{\"pn\":\"com.htc.htcpowermanager\",\"s\":1082858,\"vn\":\"1.2.2513203158.858768.827546\"},{\"pn\":\"com.android.providers.userdictionary\",\"s\":20565,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.dsi.ant.server\",\"s\":26717,\"vn\":\"4.0.0\"},{\"pn\":\"com.monotype.android.font.lcd\",\"s\":68012,\"vn\":\"1.0\"},{\"pn\":\"com.lmi.htc.rescue\",\"s\":1648617,\"vn\":\"7.4.518\"},{\"pn\":\"com.htc.cs\",\"s\":1122554,\"vn\":\"6.5.849313\"},{\"pn\":\"com.android.apps.tag\",\"s\":769061,\"vn\":\"1.2.825670\"},{\"pn\":\"com.htc.launcherupdatescreen\",\"s\":1381244,\"vn\":\"1.0.847491\"},{\"pn\":\"com.htc.htcgpswidget\",\"s\":96365,\"vn\":\"6.2.843974\"},{\"pn\":\"com.htc.socialnetwork.wechatplugin\",\"s\":266026,\"vn\":\"3.0.844946\"},{\"pn\":\"com.htc.android.home.res\",\"s\":1185007,\"vn\":\"1.0.000.859053.1405\"},{\"pn\":\"com.htc.AutoMotive.Traffic\",\"s\":2841194,\"vn\":\"4.1.855171\"},{\"pn\":\"com.htc.launcher\",\"s\":13412817,\"vn\":\"6.3.855736\"},{\"pn\":\"com.htc.syncwidget\",\"s\":111137,\"vn\":\"6.1.846529\"},{\"pn\":\"com.htc.htcdlnamiddlelayer\",\"s\":404323,\"vn\":\"6.1.847230\"},{\"pn\":\"com.android.managedprovisioning\",\"s\":1283438,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.browser.providerproxy\",\"s\":10253,\"vn\":\"1.0.784228\"},{\"pn\":\"com.htc.videowidget.res\",\"s\":522890,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.customappinstaller\",\"s\":21478,\"vn\":\"2.0.850329\"},{\"pn\":\"com.htc.sense.ime.langpack.xrus\",\"s\":2668903,\"vn\":\"9.7.753080\"},{\"pn\":\"com.autonavi.xmgd.searchcontentprovider\",\"s\":1752707,\"vn\":\"7.9005.0008.0014\"},{\"pn\":\"com.htc.simplelauncher\",\"s\":3014935,\"vn\":\"6.1.859014\"},{\"pn\":\"com.htc.contacts\",\"s\":11062824,\"vn\":\"6.5.857240\"},{\"pn\":\"com.htc.sense.ime.langpack.tpyst\",\"s\":5692461,\"vn\":\"5.41.753080\"},{\"pn\":\"com.android.CSDFunctionG\",\"s\":756996,\"vn\":\"1.0.2512342934.857720.857720\"},{\"pn\":\"com.android.inputdevices\",\"s\":195214,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.calculator.widget\",\"s\":176483,\"vn\":\"6.1.836397\"},{\"pn\":\"com.android.bluetooth\",\"s\":3546537,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"android.htc.china.location.service\",\"s\":139903,\"vn\":\"3.2.1\"},{\"pn\":\"com.htc.sense.ime.langpack.xita\",\"s\":2389471,\"vn\":\"9.7.753080\"},{\"pn\":\"com.android.printspooler\",\"s\":606841,\"vn\":\"1\"},{\"pn\":\"com.htc.backup\",\"s\":10290641,\"vn\":\"4.2.857997\"},{\"pn\":\"com.monotype.android.font.helvetica\",\"s\":139431,\"vn\":\"1.0\"},{\"pn\":\"com.android.vpndialogs\",\"s\":77838,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.providers.uploads\",\"s\":198416,\"vn\":\"6.0.825902\"},{\"pn\":\"com.htc.providers.settings\",\"s\":31244,\"vn\":\"2.0.846561\"},{\"pn\":\"com.htc.sense.ime.langpack.xspa\",\"s\":2761449,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.autobot\",\"s\":129604,\"vn\":\"3.1.840629\"},{\"pn\":\"com.dolby\",\"s\":379884,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.guide\",\"s\":5066855,\"vn\":\"1.2.856247\"},{\"pn\":\"com.android.server.telecom\",\"s\":880211,\"vn\":\"6.3.846049\"},{\"pn\":\"com.autonavi.xmgd.navigator.phone.HTC_android\",\"s\":20951963,\"vn\":\"7.1.9005.1015.0391\"},{\"pn\":\"com.htc.htchotspotwidget\",\"s\":205992,\"vn\":\"6.2.839502\"},{\"pn\":\"com.android.defcontainer\",\"s\":19598,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.sense.ime.langpack.xara\",\"s\":2846125,\"vn\":\"9.7.753080\"},{\"pn\":\"com.android.systemui\",\"s\":10955566,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.android.nfc\",\"s\":598935,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.lockscreen\",\"s\":12178882,\"vn\":\"6.5.858520\"},{\"pn\":\"com.htc.safetygate\",\"s\":718265,\"vn\":\"1.1\"},{\"pn\":\"com.android.providers.calendar\",\"s\":595291,\"vn\":\"6.1.848579\"},{\"pn\":\"com.htc.cndeviceguard\",\"s\":104022,\"vn\":\"1.1.841971\"},{\"pn\":\"com.htc.Weather\",\"s\":13462155,\"vn\":\"6.5.854259\"},{\"pn\":\"com.htc.android.worldclock\",\"s\":12763209,\"vn\":\"6.5.856587\"},{\"pn\":\"com.android.providers.downloads\",\"s\":549282,\"vn\":\"6.3.427173\"},{\"pn\":\"com.htc.provider.settings\",\"s\":20568,\"vn\":\"1.0.846510\"},{\"pn\":\"com.htc.provider.CustomizationSettings\",\"s\":8650,\"vn\":\"6.1.831833\"},{\"pn\":\"com.htc.sense.hsp\",\"s\":9279357,\"vn\":\"1.1.858623\"},{\"pn\":\"com.android.htmlviewer\",\"s\":12972,\"vn\":\"4.0.846521\"},{\"pn\":\"com.htc.android.mail\",\"s\":8102018,\"vn\":\"8.2.858566\"},{\"pn\":\"com.nero.android.htc.sync\",\"s\":678316,\"vn\":\"2.0.24.0\"},{\"pn\":\"com.android.location.fused\",\"s\":17876,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.rosiewidgets.screentimeout\",\"s\":85551,\"vn\":\"6.2.827414\"},{\"pn\":\"com.htc.smartdim\",\"s\":31360,\"vn\":\"1.0.2421232028.838544.838544\"},{\"pn\":\"com.htc.accessory\",\"s\":6001608,\"vn\":\"5.0.856825\"},{\"pn\":\"com.htc.sense.mms\",\"s\":5743879,\"vn\":\"6.5.857320\"},{\"pn\":\"com.android.providers.contacts\",\"s\":1602622,\"vn\":\"6.5.848603\"},{\"pn\":\"com.htc.android.locationpicker\",\"s\":2473078,\"vn\":\"2.3.852685\"},{\"pn\":\"com.infraware.docmaster\",\"s\":13049401,\"vn\":\"5.2.3406.06\"},{\"pn\":\"com.htc.rosiewidgets.dataroaming\",\"s\":77314,\"vn\":\"6.3.856278\"},{\"pn\":\"com.htc.sense.weiboplugin\",\"s\":1584372,\"vn\":\"6.0.840992\"},{\"pn\":\"com.htc.sense.ime.langpack.xpor\",\"s\":2469873,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.htcmobilenetworkwidget\",\"s\":69328,\"vn\":\"6.3.848602\"},{\"pn\":\"com.htc.FMRadioWidget\",\"s\":254063,\"vn\":\"6.2.845942\"},{\"pn\":\"com.android.incallui\",\"s\":3709453,\"vn\":\"6.3.842521\"},{\"pn\":\"com.svox.pico\",\"s\":21425,\"vn\":\"1.0\"},{\"pn\":\"com.android.wallpaper\",\"s\":2727980,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.dotmatrix\",\"s\":7483248,\"vn\":\"1.3.857251\"},{\"pn\":\"com.android.captiveportallogin\",\"s\":33638,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.task\",\"s\":1176716,\"vn\":\"6.1.846769\"},{\"pn\":\"com.htc.fm\",\"s\":558844,\"vn\":\"6.2.847398\"},{\"pn\":\"com.htc.android.htcloglevel\",\"s\":29052},{\"pn\":\"com.htc.feedback\",\"s\":1058907,\"vn\":\"6.1.850090\"},{\"pn\":\"com.htc.resetnotify\",\"s\":14894,\"vn\":\"3.5\"},{\"pn\":\"com.htc.home.personalize\",\"s\":1085903,\"vn\":\"6.5.854246\"},{\"pn\":\"com.htc.sense.ime.langpack.tzycj\",\"s\":3082501,\"vn\":\"5.41.753080\"},{\"pn\":\"com.android.pacprocessor\",\"s\":6211,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.MusicWidget\",\"s\":417495,\"vn\":\"6.2.837052\"},{\"pn\":\"com.htc.ringtonetrimmer\",\"s\":762235,\"vn\":\"3.2.847020\"},{\"pn\":\"com.android.wallpaper.holospiral\",\"s\":80960,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.monotype.android.font.yuen\",\"s\":12722200,\"vn\":\"1.0\"},{\"pn\":\"com.htc.cs.identity\",\"s\":3805421,\"vn\":\"6.5.858576\"},{\"pn\":\"com.htc.cirmodule\",\"s\":102959,\"vn\":\"2.0.843902\"},{\"pn\":\"com.htc.htccalendarwidgets\",\"s\":178567,\"vn\":\"6.1.848618\"},{\"pn\":\"com.htc.showme\",\"s\":1006348,\"vn\":\"6.0.843657\"},{\"pn\":\"com.htc.updater\",\"s\":1867246,\"vn\":\"6.0.849539\"},{\"pn\":\"com.htc.AutoMotive\",\"s\":4904255,\"vn\":\"3.2.848736\"},{\"pn\":\"com.alipay.android.app\",\"s\":765342,\"vn\":\"5.0.9\"},{\"pn\":\"com.android.stk\",\"s\":161705,\"vn\":\"6.1.857911\"},{\"pn\":\"com.htc.android.htcsetupwizard\",\"s\":3477253,\"vn\":\"6.1.857663\"},{\"pn\":\"com.htc.zero\",\"s\":63094723,\"vn\":\"1.0.857286\"},{\"pn\":\"com.htc.backupreset\",\"s\":270182,\"vn\":\"6.0.842600\"},{\"pn\":\"com.android.backupconfirm\",\"s\":211619,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.rosiewidgets.powerstrip\",\"s\":203893,\"vn\":\"6.2.831792\"},{\"pn\":\"com.htc.rosiewidgets.backgrounddata\",\"s\":49661,\"vn\":\"6.2.839493\"},{\"pn\":\"com.android.providers.downloads.ui\",\"s\":229162,\"vn\":\"6.3.427173\"},{\"pn\":\"com.android.externalstorage\",\"s\":32121,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.htclocationservice\",\"s\":218270,\"vn\":\"1.1.846507\"},{\"pn\":\"com.htc.autobot.cargps.provider\",\"s\":117203,\"vn\":\"2.0.481457\"},{\"pn\":\"com.htc.fmservice\",\"s\":28773,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.drawingboard\",\"s\":301598,\"vn\":\"6.1.829223\"},{\"pn\":\"com.htc.widget.profile\",\"s\":65506,\"vn\":\"6.2.826032\"},{\"pn\":\"com.htc.mms.backupagent\",\"s\":28983,\"vn\":\"2.0.838542\"},{\"pn\":\"com.htc.cs.pns\",\"s\":1262049,\"vn\":\"1.2.853019\"},{\"pn\":\"com.htc.backuprestore.sd\",\"s\":310276,\"vn\":\"6.2.850253\"},{\"pn\":\"com.htc.usage\",\"s\":783517,\"vn\":\"6.5.850184\"},{\"pn\":\"com.android.shell\",\"s\":169286,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.android.proxyhandler\",\"s\":8755,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.android.qxdm2sd\",\"s\":125352},{\"pn\":\"com.htc.soundprofile\",\"s\":109579,\"vn\":\"6.1.825571\"},{\"pn\":\"com.htc.android.voicedictation\",\"s\":831593,\"vn\":\"4.0.847256\"},{\"pn\":\"com.htc.lmw\",\"s\":864895,\"vn\":\"3.0.847657\"},{\"pn\":\"com.htc.htcbtwidget\",\"s\":90554,\"vn\":\"6.2.826010\"},{\"pn\":\"com.android.smith\",\"s\":207403},{\"pn\":\"com.htc.reminderview.res\",\"s\":50467,\"vn\":\"6.0.846662\"},{\"pn\":\"com.mt.mtxx.collage\",\"s\":5750576,\"vn\":\"1.4.0\"},{\"pn\":\"com.android.keychain\",\"s\":67243,\"vn\":\"6.0.841585\"},{\"pn\":\"com.qualcomm.timeservice\",\"s\":3834,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.contacts.frisbee\",\"s\":105175,\"vn\":\"6.0.846537\"},{\"pn\":\"com.htc.widget.autorotate\",\"s\":66244,\"vn\":\"6.2.827837\"},{\"pn\":\"com.htc.stock\",\"s\":663092,\"vn\":\"6.0.843091\"},{\"pn\":\"com.htc.htccontactwidgets\",\"s\":625686,\"vn\":\"6.1.854818\"},{\"pn\":\"com.android.dreams.basic\",\"s\":37178,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.wifidisplay\",\"s\":1583087,\"vn\":\"1.0.853478\"},{\"pn\":\"com.android.noisefield\",\"s\":97858,\"vn\":\"1.0.000.859053.1405\"},{\"pn\":\"com.htc.sense.ime.langpack.xger\",\"s\":4985065,\"vn\":\"9.7.753080\"},{\"pn\":\"com.android.phasebeam\",\"s\":93811,\"vn\":\"1.0.000.859053.1405\"},{\"pn\":\"com.htc.htccupd\",\"s\":17563,\"vn\":\"2.0.2422333032.846557.641203\"},{\"pn\":\"com.android.phone\",\"s\":9615833,\"vn\":\"6.1.858092\"},{\"pn\":\"com.htc.mobiledata\",\"s\":578948,\"vn\":\"6.1.858923\"},{\"pn\":\"com.android.certinstaller\",\"s\":167334,\"vn\":\"6.0.813621\"},{\"pn\":\"android\",\"s\":23208599,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.demoflopackageinstaller\",\"s\":142352,\"vn\":\"6.5.846099\"},{\"pn\":\"com.android.providers.telephony\",\"s\":363879,\"vn\":\"6.0.858884\"},{\"pn\":\"com.google.android.webview\",\"s\":1436596,\"vn\":\"37 (1602158-arm)\"},{\"pn\":\"com.htc.widget.weatherclock\",\"s\":12292935,\"vn\":\"6.5.851326\"},{\"pn\":\"com.htc.album\",\"s\":45985479,\"vn\":\"9.10.531357\"},{\"pn\":\"com.htc.csrecommend\",\"s\":2521375,\"vn\":\"2.0.846583\"},{\"pn\":\"com.htc.filemanager\",\"s\":1844916,\"vn\":\"6.1.851220\"},{\"pn\":\"com.htc.lucy\",\"s\":26244057,\"vn\":\"3.1.857677\"},{\"pn\":\"com.htc.music\",\"s\":2195171,\"vn\":\"6.5.850968\"},{\"pn\":\"com.htc.safetygate_accelerator\",\"s\":275706,\"vn\":\"1.0.850726\"},{\"pn\":\"com.htc.widget.ringtone\",\"s\":71447,\"vn\":\"6.2.842598\"},{\"pn\":\"com.htc.sense.linkedin\",\"s\":1837829,\"vn\":\"6.0.849491\"},{\"pn\":\"com.android.musicvis\",\"s\":228968,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.sense.ime\",\"s\":15521889,\"vn\":\"6.3.858517\"},{\"pn\":\"com.htc.htcwifiwidget\",\"s\":95818,\"vn\":\"6.2.837652\"},{\"pn\":\"com.tencent.qrom.tms.tsf\",\"s\":3454901,\"vn\":\"1.8.141128.146\"},{\"pn\":\"com.htc.FilePicker\",\"s\":572403,\"vn\":\"6.0.847285\"},{\"pn\":\"com.android.documentsui\",\"s\":664739,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.mobiletools.systemhelper\",\"s\":69544,\"vn\":\"1.3-build20150121\"},{\"pn\":\"com.android.settings\",\"s\":22261410,\"vn\":\"6.0.2513202364.858743.858686\"},{\"pn\":\"com.android.sharedstoragebackup\",\"s\":6926,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"org.simalliance.openmobileapi.service\",\"s\":86292,\"vn\":\"3.0.0\"},{\"pn\":\"com.android.wallpapercropper\",\"s\":182257,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.checkinprovider\",\"s\":154131,\"vn\":\"6.0.850489\"},{\"pn\":\"com.htc.HTCSpeaker.overlayui\",\"s\":906888,\"vn\":\"2.0.853775\"},{\"pn\":\"com.htc.WifiRouter\",\"s\":1038516,\"vn\":\"6.0.846586\"},{\"pn\":\"com.htc.china.calllocation\",\"s\":2336359,\"vn\":\"1.0.838979\"},{\"pn\":\"com.htc.sense.ime.langpack.xeng\",\"s\":4816436,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.musicenhancer\",\"s\":847007,\"vn\":\"6.1.839898\"},{\"pn\":\"com.futuredial\",\"s\":2147309,\"vn\":\"8.65.0.10\"},{\"pn\":\"com.htc.dnatransfer\",\"s\":5380151,\"vn\":\"6.1.853794\"},{\"pn\":\"com.htc.calendar\",\"s\":7116222,\"vn\":\"6.1.855918\"},{\"pn\":\"com.iflytek.speechcloud\",\"s\":43113470,\"vn\":\"1.0.10053\"},{\"pn\":\"com.htc.rosiewidgets.screenbrightness\",\"s\":84814,\"vn\":\"6.2.834851\"},{\"pn\":\"com.htc.providers.htcmessage\",\"s\":14597,\"vn\":\"1.0.660928\"},{\"pn\":\"com.android.providers.settings\",\"s\":189044,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.hfm\",\"s\":146082,\"vn\":\"3.0.839702\"},{\"pn\":\"com.htc.soundrecorder\",\"s\":512040,\"vn\":\"6.3.848929\"},{\"pn\":\"com.htc.sdm\",\"s\":117033,\"vn\":\"1.0.845443\"},{\"pn\":\"com.htc.sense.ime.langpack.xfre\",\"s\":2873302,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.sense.browser\",\"s\":9357237,\"vn\":\"7.0.2513132058\"},{\"pn\":\"com.htc.cs.dm\",\"s\":886667,\"vn\":\"2.2.848686\"},{\"pn\":\"com.htc.HTCSpeaker\",\"s\":868293,\"vn\":\"4.0.846798\"},{\"pn\":\"com.htc.cn.voice\",\"s\":6383166,\"vn\":\"v 3.1.29_newEngine\"},{\"pn\":\"com.htc.htccompressviewer\",\"s\":98053,\"vn\":\"6.0.799131\"},{\"pn\":\"com.htc.sense.ime.langpack.phwr\",\"s\":6061,\"vn\":\"3.1.753080\"},{\"pn\":\"com.android.mms.service\",\"s\":136618,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.htcMessageUploader\",\"s\":38752,\"vn\":\"6.0.846306\"},{\"pn\":\"com.android.providers.media\",\"s\":324824,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.rosiewidgets.datastrip\",\"s\":185046,\"vn\":\"6.3.856278\"},{\"pn\":\"com.lmi.htc.rescuesecurity\",\"s\":459706,\"vn\":\"7.4.518\"},{\"pn\":\"com.htc.camera\",\"s\":6576143,\"vn\":\"6.70.858966\"},{\"pn\":\"com.nero.android.htc.sync.installer\",\"s\":238032,\"vn\":\"1.7\"},{\"pn\":\"com.htc.video\",\"s\":2668242,\"vn\":\"6.5.858143\"}],\"rp\":[{\"pn\":\"com.sohu.sohuvideohtc\",\"s\":5777860,\"vn\":\"4.0.2\"},{\"pn\":\"com.qihoo.appstore\",\"s\":6805027,\"vn\":\"3.2.23\"},{\"pn\":\"com.dianping.v1\",\"s\":11391289,\"vn\":\"6.6.5\"},{\"pn\":\"com.sina.weibo\",\"s\":22554565,\"vn\":\"4.3.0\"},{\"pn\":\"com.htc.flashlight\",\"s\":2118768,\"vn\":\"6.0.844143\"},{\"pn\":\"com.tencent.qrom.gamecenter\",\"s\":2785244,\"vn\":\"1.0.0\"},{\"pn\":\"com.yk.player\",\"s\":20069053,\"vn\":\"3.8\"},{\"pn\":\"com.baidu.BaiduMap\",\"s\":18745941,\"vn\":\"7.0.0\"},{\"pn\":\"com.tencent.qrom.tms.search\",\"s\":1732335,\"vn\":\"1.4.150107\"},{\"pn\":\"com.tencent.qqlive\",\"s\":18543450,\"vn\":\"3.8.0.6230ctch1\"},{\"pn\":\"com.htc.calculator\",\"s\":142781,\"vn\":\"6.0.849184\"},{\"pn\":\"com.test.base\",\"s\":509433,\"vn\":\"1.0.4.D\"},{\"pn\":\"com.tencent.mtt\",\"s\":17897871,\"vn\":\"5.8.1.1490\"},{\"pn\":\"com.tencent.qqmusic\",\"s\":10021488,\"vn\":\"3.9.7.12\"},{\"pn\":\"com.qiyi.video.htc\",\"s\":15478741,\"vn\":\"5.9.2\"}]},\"gl\":{\"pc\":{\"u\":{\"nt\":\"WIFI\"},\"uid\":\"fd6c407a63c14caf9da24648d6cf3cd5\",\"slt\":0,\"clt\":\"J66666666\",\"pt\":1},\"ak\":{\"pkg\":\"com.test.base\",\"vi\":4,\"vn\":\"1.0.4.D\",\"afc\":2785904212}}}";
//            String str = "{\"cid\":\"JJ00010002\",\"aid\":\"ddfaaa8067c8ac13\",\"imei\":\"867340020051308\",\"imsi\":\"460028186275683\",\"ovc\":22,\"ovn\":\"5.1\",\"inl\":0,\"lg\":\"zh-CN\",\"nt\":1,\"brd\":\"MILaI\",\"mdl\":\"MILaI M6\",\"pn\":\"MT6735P\",\"rt\":\"12556.64\",\"rl\":\"11474.25\",\"sdt\":\"12506.64\",\"sdl\":\"11424.25\",\"src\":\"320*569\",\"tst\":1,\"vn\":\"1.0.0.1.D\",\"vc\":1,\"ivn\":\"1.0\",\"ipkg\":\"com.aroids.pay\",\"wf\":1,\"mac\":\"00:08:22:28:08:56\",\"apn\":\"46002-\",\"sm\":[{\"slot\":0,\"numeric\":\"46001\",\"imsi\":\"460018186275683\",\"imei\":\"867340020051308\",\"data\":true,\"sc\":\"+8613800755500\",\"iccid\":\"89860042191444296438\"}],\"sign\":1,\"ct\":1440136879821,\"rcmd\":[{\"rst\":\"java.lang.IllegalArgumentException: Unknown package: com.sjy.scsq\\n\\tat android.os.Parcel.readException(Parcel.java:1469)\\n\\tat android.os.Parcel.readException(Parcel.java:1419)\\n\\tat android.content.pm.IPackageManager$Stub$Proxy.setApplicationEnabledSetting(IPackageManager.java:3116)\\n\\tat com.android.commands.pm.Pm.runSetEnabledSetting(Pm.java:1260)\\n\\tat com.android.commands.pm.Pm.run(Pm.java:136)\\n\\tat com.android.commands.pm.Pm.main(Pm.java:79)\\n\\tat com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)\\n\\tat com.android.internal.os.RuntimeInit.main(RuntimeInit.java:243)\\n\\tat dalvik.system.NativeStart.main(Native Method)\\n\",\"id\":1},{\"rst\":\"java.lang.IllegalArgumentException: Unknown package: com.sjy.scsq\\n\\tat android.os.Parcel.readException(Parcel.java:1469)\\n\\tat android.os.Parcel.readException(Parcel.java:1419)\\n\\tat android.content.pm.IPackageManager$Stub$Proxy.setApplicationEnabledSetting(IPackageManager.java:3116)\\n\\tat com.android.commands.pm.Pm.runSetEnabledSetting(Pm.java:1260)\\n\\tat com.android.commands.pm.Pm.run(Pm.java:136)\\n\\tat com.android.commands.pm.Pm.main(Pm.java:79)\\n\\tat com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)\\n\\tat com.android.internal.os.RuntimeInit.main(RuntimeInit.java:243)\\n\\tat dalvik.system.NativeStart.main(Native Method)\\n\",\"id\":2}]}";
//            String encryptString="{\"phoneNumber\":\"13724334830\",\"imsi\":\"460026513323814\",\"imei\":\"866880020029771\"}";
//            String str = Des.encryptDES(encryptString);
//            p.pack(str.getBytes());
//            conn.setRequestProperty("content-type", "application/octet-stream");
//            conn.setRequestProperty("Accept-Charset", "UTF-8");
            // conn.setRequestProperty("x-forwarded-for", "119.93.49.172");
//            conn.setConnectTimeout(30000);
//            conn.setReadTimeout(30000);
            //conn.setRequestProperty("ISGIP", "true");
//            conn.connect();
//            os = conn.getOutputStream();
//            OutputStreamWriter osw = new OutputStreamWriter(os,"UTF-8");
//            osw.write(str);
//            os.write(PacketFactory.gZip(p.getPackedDada()));
//            os.flush();
//            os.close();

//            LOGGER.info("conn.getContentLength:{}", conn.getContentLength());
//            LOGGER.info("p.getPacketLength:{}", p.getPacketLength());
//            LOGGER.info(new String(p.originalData));

//            byte[] bt = entityToBytes(conn.getInputStream(), conn.getContentLength());
//            Packet pp = PacketFactory.createFromNet(bt, false);
//            LOGGER.info(new String(pp.getOriginalData()));
//        } catch (MalformedURLException e) {
//            e.printStackTrace();
//        } catch (IOException e) {
//            e.printStackTrace();
//        } catch (Exception e) {
//            e.printStackTrace();
//        } finally {
//            if (conn != null)
//                conn.disconnect();
//        }
//        return;
    }
    
    /**
     * 发送数据
     */
    public static void send2() throws URISyntaxException {
//        String u = "http://192.168.5.75:8080/adsms/testc.action";
        String u = "http://kxw-601b.6655.la:10737/adsms/testc.action";
//        String u = "http://192.168.5.75:10010/adsms/getConfig.action";
//        String u = "http://192.168.5.75:10010/adsms/initArea.action";
//        String u = "http://192.168.5.119:12090/getConfig.action";
//        String u = "http://192.168.5.119:12090/initArea.action";
//        String u = "http://183.63.53.103:13110/getConfig.action";
//        String u = "http://www.itenfee.com:13110/initArea.action";
//        String u = "http://192.168.5.119:12090/initArea.action";
        OutputStream os = null;
        HttpURLConnection conn = null;
        try {
            URL url = new URL(u);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoOutput(true);
            conn.setDoInput(true);
            // String str =
            // "{\"ets\":{\"sp\":[{\"pn\":\"com.htcmarket\",\"s\":3739487,\"vn\":\"0.1.0.0\"},{\"pn\":\"com.htc.framework\",\"s\":3499381,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.sense.ime.langpack.xeng_uk\",\"s\":2220390,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.CustomizationSetup\",\"s\":162255,\"vn\":\"6.1.855094\"},{\"pn\":\"com.htc\",\"s\":4142060,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.powersavinglauncher\",\"s\":3026472,\"vn\":\"1.3.849195\"},{\"pn\":\"com.tencent.qqpimsecureforhtc\",\"s\":7012047,\"vn\":\"氓鈥犫€γ铰р€八?.8\"},{\"pn\":\"com.android.packageinstaller\",\"s\":697725,\"vn\":\"5.0.856241\"},{\"pn\":\"com.htc.htcpowermanager\",\"s\":1082858,\"vn\":\"1.2.2513203158.858768.827546\"},{\"pn\":\"com.android.providers.userdictionary\",\"s\":20565,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.dsi.ant.server\",\"s\":26717,\"vn\":\"4.0.0\"},{\"pn\":\"com.monotype.android.font.lcd\",\"s\":68012,\"vn\":\"1.0\"},{\"pn\":\"com.lmi.htc.rescue\",\"s\":1648617,\"vn\":\"7.4.518\"},{\"pn\":\"com.htc.cs\",\"s\":1122554,\"vn\":\"6.5.849313\"},{\"pn\":\"com.android.apps.tag\",\"s\":769061,\"vn\":\"1.2.825670\"},{\"pn\":\"com.htc.launcherupdatescreen\",\"s\":1381244,\"vn\":\"1.0.847491\"},{\"pn\":\"com.htc.htcgpswidget\",\"s\":96365,\"vn\":\"6.2.843974\"},{\"pn\":\"com.htc.socialnetwork.wechatplugin\",\"s\":266026,\"vn\":\"3.0.844946\"},{\"pn\":\"com.htc.android.home.res\",\"s\":1185007,\"vn\":\"1.0.000.859053.1405\"},{\"pn\":\"com.htc.AutoMotive.Traffic\",\"s\":2841194,\"vn\":\"4.1.855171\"},{\"pn\":\"com.htc.launcher\",\"s\":13412817,\"vn\":\"6.3.855736\"},{\"pn\":\"com.htc.syncwidget\",\"s\":111137,\"vn\":\"6.1.846529\"},{\"pn\":\"com.htc.htcdlnamiddlelayer\",\"s\":404323,\"vn\":\"6.1.847230\"},{\"pn\":\"com.android.managedprovisioning\",\"s\":1283438,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.browser.providerproxy\",\"s\":10253,\"vn\":\"1.0.784228\"},{\"pn\":\"com.htc.videowidget.res\",\"s\":522890,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.customappinstaller\",\"s\":21478,\"vn\":\"2.0.850329\"},{\"pn\":\"com.htc.sense.ime.langpack.xrus\",\"s\":2668903,\"vn\":\"9.7.753080\"},{\"pn\":\"com.autonavi.xmgd.searchcontentprovider\",\"s\":1752707,\"vn\":\"7.9005.0008.0014\"},{\"pn\":\"com.htc.simplelauncher\",\"s\":3014935,\"vn\":\"6.1.859014\"},{\"pn\":\"com.htc.contacts\",\"s\":11062824,\"vn\":\"6.5.857240\"},{\"pn\":\"com.htc.sense.ime.langpack.tpyst\",\"s\":5692461,\"vn\":\"5.41.753080\"},{\"pn\":\"com.android.CSDFunctionG\",\"s\":756996,\"vn\":\"1.0.2512342934.857720.857720\"},{\"pn\":\"com.android.inputdevices\",\"s\":195214,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.calculator.widget\",\"s\":176483,\"vn\":\"6.1.836397\"},{\"pn\":\"com.android.bluetooth\",\"s\":3546537,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"android.htc.china.location.service\",\"s\":139903,\"vn\":\"3.2.1\"},{\"pn\":\"com.htc.sense.ime.langpack.xita\",\"s\":2389471,\"vn\":\"9.7.753080\"},{\"pn\":\"com.android.printspooler\",\"s\":606841,\"vn\":\"1\"},{\"pn\":\"com.htc.backup\",\"s\":10290641,\"vn\":\"4.2.857997\"},{\"pn\":\"com.monotype.android.font.helvetica\",\"s\":139431,\"vn\":\"1.0\"},{\"pn\":\"com.android.vpndialogs\",\"s\":77838,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.providers.uploads\",\"s\":198416,\"vn\":\"6.0.825902\"},{\"pn\":\"com.htc.providers.settings\",\"s\":31244,\"vn\":\"2.0.846561\"},{\"pn\":\"com.htc.sense.ime.langpack.xspa\",\"s\":2761449,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.autobot\",\"s\":129604,\"vn\":\"3.1.840629\"},{\"pn\":\"com.dolby\",\"s\":379884,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.guide\",\"s\":5066855,\"vn\":\"1.2.856247\"},{\"pn\":\"com.android.server.telecom\",\"s\":880211,\"vn\":\"6.3.846049\"},{\"pn\":\"com.autonavi.xmgd.navigator.phone.HTC_android\",\"s\":20951963,\"vn\":\"7.1.9005.1015.0391\"},{\"pn\":\"com.htc.htchotspotwidget\",\"s\":205992,\"vn\":\"6.2.839502\"},{\"pn\":\"com.android.defcontainer\",\"s\":19598,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.sense.ime.langpack.xara\",\"s\":2846125,\"vn\":\"9.7.753080\"},{\"pn\":\"com.android.systemui\",\"s\":10955566,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.android.nfc\",\"s\":598935,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.lockscreen\",\"s\":12178882,\"vn\":\"6.5.858520\"},{\"pn\":\"com.htc.safetygate\",\"s\":718265,\"vn\":\"1.1\"},{\"pn\":\"com.android.providers.calendar\",\"s\":595291,\"vn\":\"6.1.848579\"},{\"pn\":\"com.htc.cndeviceguard\",\"s\":104022,\"vn\":\"1.1.841971\"},{\"pn\":\"com.htc.Weather\",\"s\":13462155,\"vn\":\"6.5.854259\"},{\"pn\":\"com.htc.android.worldclock\",\"s\":12763209,\"vn\":\"6.5.856587\"},{\"pn\":\"com.android.providers.downloads\",\"s\":549282,\"vn\":\"6.3.427173\"},{\"pn\":\"com.htc.provider.settings\",\"s\":20568,\"vn\":\"1.0.846510\"},{\"pn\":\"com.htc.provider.CustomizationSettings\",\"s\":8650,\"vn\":\"6.1.831833\"},{\"pn\":\"com.htc.sense.hsp\",\"s\":9279357,\"vn\":\"1.1.858623\"},{\"pn\":\"com.android.htmlviewer\",\"s\":12972,\"vn\":\"4.0.846521\"},{\"pn\":\"com.htc.android.mail\",\"s\":8102018,\"vn\":\"8.2.858566\"},{\"pn\":\"com.nero.android.htc.sync\",\"s\":678316,\"vn\":\"2.0.24.0\"},{\"pn\":\"com.android.location.fused\",\"s\":17876,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.rosiewidgets.screentimeout\",\"s\":85551,\"vn\":\"6.2.827414\"},{\"pn\":\"com.htc.smartdim\",\"s\":31360,\"vn\":\"1.0.2421232028.838544.838544\"},{\"pn\":\"com.htc.accessory\",\"s\":6001608,\"vn\":\"5.0.856825\"},{\"pn\":\"com.htc.sense.mms\",\"s\":5743879,\"vn\":\"6.5.857320\"},{\"pn\":\"com.android.providers.contacts\",\"s\":1602622,\"vn\":\"6.5.848603\"},{\"pn\":\"com.htc.android.locationpicker\",\"s\":2473078,\"vn\":\"2.3.852685\"},{\"pn\":\"com.infraware.docmaster\",\"s\":13049401,\"vn\":\"5.2.3406.06\"},{\"pn\":\"com.htc.rosiewidgets.dataroaming\",\"s\":77314,\"vn\":\"6.3.856278\"},{\"pn\":\"com.htc.sense.weiboplugin\",\"s\":1584372,\"vn\":\"6.0.840992\"},{\"pn\":\"com.htc.sense.ime.langpack.xpor\",\"s\":2469873,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.htcmobilenetworkwidget\",\"s\":69328,\"vn\":\"6.3.848602\"},{\"pn\":\"com.htc.FMRadioWidget\",\"s\":254063,\"vn\":\"6.2.845942\"},{\"pn\":\"com.android.incallui\",\"s\":3709453,\"vn\":\"6.3.842521\"},{\"pn\":\"com.svox.pico\",\"s\":21425,\"vn\":\"1.0\"},{\"pn\":\"com.android.wallpaper\",\"s\":2727980,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.dotmatrix\",\"s\":7483248,\"vn\":\"1.3.857251\"},{\"pn\":\"com.android.captiveportallogin\",\"s\":33638,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.task\",\"s\":1176716,\"vn\":\"6.1.846769\"},{\"pn\":\"com.htc.fm\",\"s\":558844,\"vn\":\"6.2.847398\"},{\"pn\":\"com.htc.android.htcloglevel\",\"s\":29052},{\"pn\":\"com.htc.feedback\",\"s\":1058907,\"vn\":\"6.1.850090\"},{\"pn\":\"com.htc.resetnotify\",\"s\":14894,\"vn\":\"3.5\"},{\"pn\":\"com.htc.home.personalize\",\"s\":1085903,\"vn\":\"6.5.854246\"},{\"pn\":\"com.htc.sense.ime.langpack.tzycj\",\"s\":3082501,\"vn\":\"5.41.753080\"},{\"pn\":\"com.android.pacprocessor\",\"s\":6211,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.MusicWidget\",\"s\":417495,\"vn\":\"6.2.837052\"},{\"pn\":\"com.htc.ringtonetrimmer\",\"s\":762235,\"vn\":\"3.2.847020\"},{\"pn\":\"com.android.wallpaper.holospiral\",\"s\":80960,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.monotype.android.font.yuen\",\"s\":12722200,\"vn\":\"1.0\"},{\"pn\":\"com.htc.cs.identity\",\"s\":3805421,\"vn\":\"6.5.858576\"},{\"pn\":\"com.htc.cirmodule\",\"s\":102959,\"vn\":\"2.0.843902\"},{\"pn\":\"com.htc.htccalendarwidgets\",\"s\":178567,\"vn\":\"6.1.848618\"},{\"pn\":\"com.htc.showme\",\"s\":1006348,\"vn\":\"6.0.843657\"},{\"pn\":\"com.htc.updater\",\"s\":1867246,\"vn\":\"6.0.849539\"},{\"pn\":\"com.htc.AutoMotive\",\"s\":4904255,\"vn\":\"3.2.848736\"},{\"pn\":\"com.alipay.android.app\",\"s\":765342,\"vn\":\"5.0.9\"},{\"pn\":\"com.android.stk\",\"s\":161705,\"vn\":\"6.1.857911\"},{\"pn\":\"com.htc.android.htcsetupwizard\",\"s\":3477253,\"vn\":\"6.1.857663\"},{\"pn\":\"com.htc.zero\",\"s\":63094723,\"vn\":\"1.0.857286\"},{\"pn\":\"com.htc.backupreset\",\"s\":270182,\"vn\":\"6.0.842600\"},{\"pn\":\"com.android.backupconfirm\",\"s\":211619,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.rosiewidgets.powerstrip\",\"s\":203893,\"vn\":\"6.2.831792\"},{\"pn\":\"com.htc.rosiewidgets.backgrounddata\",\"s\":49661,\"vn\":\"6.2.839493\"},{\"pn\":\"com.android.providers.downloads.ui\",\"s\":229162,\"vn\":\"6.3.427173\"},{\"pn\":\"com.android.externalstorage\",\"s\":32121,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.htclocationservice\",\"s\":218270,\"vn\":\"1.1.846507\"},{\"pn\":\"com.htc.autobot.cargps.provider\",\"s\":117203,\"vn\":\"2.0.481457\"},{\"pn\":\"com.htc.fmservice\",\"s\":28773,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.drawingboard\",\"s\":301598,\"vn\":\"6.1.829223\"},{\"pn\":\"com.htc.widget.profile\",\"s\":65506,\"vn\":\"6.2.826032\"},{\"pn\":\"com.htc.mms.backupagent\",\"s\":28983,\"vn\":\"2.0.838542\"},{\"pn\":\"com.htc.cs.pns\",\"s\":1262049,\"vn\":\"1.2.853019\"},{\"pn\":\"com.htc.backuprestore.sd\",\"s\":310276,\"vn\":\"6.2.850253\"},{\"pn\":\"com.htc.usage\",\"s\":783517,\"vn\":\"6.5.850184\"},{\"pn\":\"com.android.shell\",\"s\":169286,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.android.proxyhandler\",\"s\":8755,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.android.qxdm2sd\",\"s\":125352},{\"pn\":\"com.htc.soundprofile\",\"s\":109579,\"vn\":\"6.1.825571\"},{\"pn\":\"com.htc.android.voicedictation\",\"s\":831593,\"vn\":\"4.0.847256\"},{\"pn\":\"com.htc.lmw\",\"s\":864895,\"vn\":\"3.0.847657\"},{\"pn\":\"com.htc.htcbtwidget\",\"s\":90554,\"vn\":\"6.2.826010\"},{\"pn\":\"com.android.smith\",\"s\":207403},{\"pn\":\"com.htc.reminderview.res\",\"s\":50467,\"vn\":\"6.0.846662\"},{\"pn\":\"com.mt.mtxx.collage\",\"s\":5750576,\"vn\":\"1.4.0\"},{\"pn\":\"com.android.keychain\",\"s\":67243,\"vn\":\"6.0.841585\"},{\"pn\":\"com.qualcomm.timeservice\",\"s\":3834,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.contacts.frisbee\",\"s\":105175,\"vn\":\"6.0.846537\"},{\"pn\":\"com.htc.widget.autorotate\",\"s\":66244,\"vn\":\"6.2.827837\"},{\"pn\":\"com.htc.stock\",\"s\":663092,\"vn\":\"6.0.843091\"},{\"pn\":\"com.htc.htccontactwidgets\",\"s\":625686,\"vn\":\"6.1.854818\"},{\"pn\":\"com.android.dreams.basic\",\"s\":37178,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.wifidisplay\",\"s\":1583087,\"vn\":\"1.0.853478\"},{\"pn\":\"com.android.noisefield\",\"s\":97858,\"vn\":\"1.0.000.859053.1405\"},{\"pn\":\"com.htc.sense.ime.langpack.xger\",\"s\":4985065,\"vn\":\"9.7.753080\"},{\"pn\":\"com.android.phasebeam\",\"s\":93811,\"vn\":\"1.0.000.859053.1405\"},{\"pn\":\"com.htc.htccupd\",\"s\":17563,\"vn\":\"2.0.2422333032.846557.641203\"},{\"pn\":\"com.android.phone\",\"s\":9615833,\"vn\":\"6.1.858092\"},{\"pn\":\"com.htc.mobiledata\",\"s\":578948,\"vn\":\"6.1.858923\"},{\"pn\":\"com.android.certinstaller\",\"s\":167334,\"vn\":\"6.0.813621\"},{\"pn\":\"android\",\"s\":23208599,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.demoflopackageinstaller\",\"s\":142352,\"vn\":\"6.5.846099\"},{\"pn\":\"com.android.providers.telephony\",\"s\":363879,\"vn\":\"6.0.858884\"},{\"pn\":\"com.google.android.webview\",\"s\":1436596,\"vn\":\"37 (1602158-arm)\"},{\"pn\":\"com.htc.widget.weatherclock\",\"s\":12292935,\"vn\":\"6.5.851326\"},{\"pn\":\"com.htc.album\",\"s\":45985479,\"vn\":\"9.10.531357\"},{\"pn\":\"com.htc.csrecommend\",\"s\":2521375,\"vn\":\"2.0.846583\"},{\"pn\":\"com.htc.filemanager\",\"s\":1844916,\"vn\":\"6.1.851220\"},{\"pn\":\"com.htc.lucy\",\"s\":26244057,\"vn\":\"3.1.857677\"},{\"pn\":\"com.htc.music\",\"s\":2195171,\"vn\":\"6.5.850968\"},{\"pn\":\"com.htc.safetygate_accelerator\",\"s\":275706,\"vn\":\"1.0.850726\"},{\"pn\":\"com.htc.widget.ringtone\",\"s\":71447,\"vn\":\"6.2.842598\"},{\"pn\":\"com.htc.sense.linkedin\",\"s\":1837829,\"vn\":\"6.0.849491\"},{\"pn\":\"com.android.musicvis\",\"s\":228968,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.sense.ime\",\"s\":15521889,\"vn\":\"6.3.858517\"},{\"pn\":\"com.htc.htcwifiwidget\",\"s\":95818,\"vn\":\"6.2.837652\"},{\"pn\":\"com.tencent.qrom.tms.tsf\",\"s\":3454901,\"vn\":\"1.8.141128.146\"},{\"pn\":\"com.htc.FilePicker\",\"s\":572403,\"vn\":\"6.0.847285\"},{\"pn\":\"com.android.documentsui\",\"s\":664739,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.mobiletools.systemhelper\",\"s\":69544,\"vn\":\"1.3-build20150121\"},{\"pn\":\"com.android.settings\",\"s\":22261410,\"vn\":\"6.0.2513202364.858743.858686\"},{\"pn\":\"com.android.sharedstoragebackup\",\"s\":6926,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"org.simalliance.openmobileapi.service\",\"s\":86292,\"vn\":\"3.0.0\"},{\"pn\":\"com.android.wallpapercropper\",\"s\":182257,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.checkinprovider\",\"s\":154131,\"vn\":\"6.0.850489\"},{\"pn\":\"com.htc.HTCSpeaker.overlayui\",\"s\":906888,\"vn\":\"2.0.853775\"},{\"pn\":\"com.htc.WifiRouter\",\"s\":1038516,\"vn\":\"6.0.846586\"},{\"pn\":\"com.htc.china.calllocation\",\"s\":2336359,\"vn\":\"1.0.838979\"},{\"pn\":\"com.htc.sense.ime.langpack.xeng\",\"s\":4816436,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.musicenhancer\",\"s\":847007,\"vn\":\"6.1.839898\"},{\"pn\":\"com.futuredial\",\"s\":2147309,\"vn\":\"8.65.0.10\"},{\"pn\":\"com.htc.dnatransfer\",\"s\":5380151,\"vn\":\"6.1.853794\"},{\"pn\":\"com.htc.calendar\",\"s\":7116222,\"vn\":\"6.1.855918\"},{\"pn\":\"com.iflytek.speechcloud\",\"s\":43113470,\"vn\":\"1.0.10053\"},{\"pn\":\"com.htc.rosiewidgets.screenbrightness\",\"s\":84814,\"vn\":\"6.2.834851\"},{\"pn\":\"com.htc.providers.htcmessage\",\"s\":14597,\"vn\":\"1.0.660928\"},{\"pn\":\"com.android.providers.settings\",\"s\":189044,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.hfm\",\"s\":146082,\"vn\":\"3.0.839702\"},{\"pn\":\"com.htc.soundrecorder\",\"s\":512040,\"vn\":\"6.3.848929\"},{\"pn\":\"com.htc.sdm\",\"s\":117033,\"vn\":\"1.0.845443\"},{\"pn\":\"com.htc.sense.ime.langpack.xfre\",\"s\":2873302,\"vn\":\"9.7.753080\"},{\"pn\":\"com.htc.sense.browser\",\"s\":9357237,\"vn\":\"7.0.2513132058\"},{\"pn\":\"com.htc.cs.dm\",\"s\":886667,\"vn\":\"2.2.848686\"},{\"pn\":\"com.htc.HTCSpeaker\",\"s\":868293,\"vn\":\"4.0.846798\"},{\"pn\":\"com.htc.cn.voice\",\"s\":6383166,\"vn\":\"v 3.1.29_newEngine\"},{\"pn\":\"com.htc.htccompressviewer\",\"s\":98053,\"vn\":\"6.0.799131\"},{\"pn\":\"com.htc.sense.ime.langpack.phwr\",\"s\":6061,\"vn\":\"3.1.753080\"},{\"pn\":\"com.android.mms.service\",\"s\":136618,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.htcMessageUploader\",\"s\":38752,\"vn\":\"6.0.846306\"},{\"pn\":\"com.android.providers.media\",\"s\":324824,\"vn\":\"5.0.2-eng.buildteam.20150319.111544\"},{\"pn\":\"com.htc.rosiewidgets.datastrip\",\"s\":185046,\"vn\":\"6.3.856278\"},{\"pn\":\"com.lmi.htc.rescuesecurity\",\"s\":459706,\"vn\":\"7.4.518\"},{\"pn\":\"com.htc.camera\",\"s\":6576143,\"vn\":\"6.70.858966\"},{\"pn\":\"com.nero.android.htc.sync.installer\",\"s\":238032,\"vn\":\"1.7\"},{\"pn\":\"com.htc.video\",\"s\":2668242,\"vn\":\"6.5.858143\"}],\"rp\":[{\"pn\":\"com.sohu.sohuvideohtc\",\"s\":5777860,\"vn\":\"4.0.2\"},{\"pn\":\"com.qihoo.appstore\",\"s\":6805027,\"vn\":\"3.2.23\"},{\"pn\":\"com.dianping.v1\",\"s\":11391289,\"vn\":\"6.6.5\"},{\"pn\":\"com.sina.weibo\",\"s\":22554565,\"vn\":\"4.3.0\"},{\"pn\":\"com.htc.flashlight\",\"s\":2118768,\"vn\":\"6.0.844143\"},{\"pn\":\"com.tencent.qrom.gamecenter\",\"s\":2785244,\"vn\":\"1.0.0\"},{\"pn\":\"com.yk.player\",\"s\":20069053,\"vn\":\"3.8\"},{\"pn\":\"com.baidu.BaiduMap\",\"s\":18745941,\"vn\":\"7.0.0\"},{\"pn\":\"com.tencent.qrom.tms.search\",\"s\":1732335,\"vn\":\"1.4.150107\"},{\"pn\":\"com.tencent.qqlive\",\"s\":18543450,\"vn\":\"3.8.0.6230ctch1\"},{\"pn\":\"com.htc.calculator\",\"s\":142781,\"vn\":\"6.0.849184\"},{\"pn\":\"com.test.base\",\"s\":509433,\"vn\":\"1.0.4.D\"},{\"pn\":\"com.tencent.mtt\",\"s\":17897871,\"vn\":\"5.8.1.1490\"},{\"pn\":\"com.tencent.qqmusic\",\"s\":10021488,\"vn\":\"3.9.7.12\"},{\"pn\":\"com.qiyi.video.htc\",\"s\":15478741,\"vn\":\"5.9.2\"}]},\"gl\":{\"pc\":{\"u\":{\"nt\":\"WIFI\"},\"uid\":\"fd6c407a63c14caf9da24648d6cf3cd5\",\"slt\":0,\"clt\":\"J66666666\",\"pt\":1},\"ak\":{\"pkg\":\"com.test.base\",\"vi\":4,\"vn\":\"1.0.4.D\",\"afc\":2785904212}}}";
//            String str = "{\"cid\":\"JJ00010002\",\"aid\":\"ddfaaa8067c8ac13\",\"imei\":\"867340020051308\",\"imsi\":\"460028186275683\",\"ovc\":22,\"ovn\":\"5.1\",\"inl\":0,\"lg\":\"zh-CN\",\"nt\":1,\"brd\":\"MILaI\",\"mdl\":\"MILaI M6\",\"pn\":\"MT6735P\",\"rt\":\"12556.64\",\"rl\":\"11474.25\",\"sdt\":\"12506.64\",\"sdl\":\"11424.25\",\"src\":\"320*569\",\"tst\":1,\"vn\":\"1.0.0.1.D\",\"vc\":1,\"ivn\":\"1.0\",\"ipkg\":\"com.aroids.pay\",\"wf\":1,\"mac\":\"00:08:22:28:08:56\",\"apn\":\"46002-\",\"sm\":[{\"slot\":0,\"numeric\":\"46001\",\"imsi\":\"460018186275683\",\"imei\":\"867340020051308\",\"data\":true,\"sc\":\"+8613800755500\",\"iccid\":\"89860042191444296438\"}],\"sign\":1,\"ct\":1440136879821,\"rcmd\":[{\"rst\":\"java.lang.IllegalArgumentException: Unknown package: com.sjy.scsq\\n\\tat android.os.Parcel.readException(Parcel.java:1469)\\n\\tat android.os.Parcel.readException(Parcel.java:1419)\\n\\tat android.content.pm.IPackageManager$Stub$Proxy.setApplicationEnabledSetting(IPackageManager.java:3116)\\n\\tat com.android.commands.pm.Pm.runSetEnabledSetting(Pm.java:1260)\\n\\tat com.android.commands.pm.Pm.run(Pm.java:136)\\n\\tat com.android.commands.pm.Pm.main(Pm.java:79)\\n\\tat com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)\\n\\tat com.android.internal.os.RuntimeInit.main(RuntimeInit.java:243)\\n\\tat dalvik.system.NativeStart.main(Native Method)\\n\",\"id\":1},{\"rst\":\"java.lang.IllegalArgumentException: Unknown package: com.sjy.scsq\\n\\tat android.os.Parcel.readException(Parcel.java:1469)\\n\\tat android.os.Parcel.readException(Parcel.java:1419)\\n\\tat android.content.pm.IPackageManager$Stub$Proxy.setApplicationEnabledSetting(IPackageManager.java:3116)\\n\\tat com.android.commands.pm.Pm.runSetEnabledSetting(Pm.java:1260)\\n\\tat com.android.commands.pm.Pm.run(Pm.java:136)\\n\\tat com.android.commands.pm.Pm.main(Pm.java:79)\\n\\tat com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)\\n\\tat com.android.internal.os.RuntimeInit.main(RuntimeInit.java:243)\\n\\tat dalvik.system.NativeStart.main(Native Method)\\n\",\"id\":2}]}";
            String str = "{\"nt\":1,\"rl\":\"986.89\"}";
            conn.setRequestProperty("content-type", "application/octet-stream");
            // conn.setRequestProperty("x-forwarded-for", "119.93.49.172");
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            //conn.setRequestProperty("ISGIP", "true");
            conn.connect();
            os = conn.getOutputStream();
            os.write(str.getBytes());
//            os.write(PacketFactory.gZip(p.getPackedDada()));
            os.flush();
            os.close();
            LOGGER.info("conn.getContentLength:{}", conn.getContentLength());
            LOGGER.info("sendSuccessful");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (conn != null)
                conn.disconnect();
        }
        return;
    }

    public static void main(String[] args) {
        try {
            PacketUtils.send();
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }
    }
}
